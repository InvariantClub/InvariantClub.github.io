<div class="offerings">
  <div class="offering">
    <div class="top">
      <div class="title">
        <h2> <em>Metadelta</em>
          <span class="beta">beta</span> for Hasura
        </h2>

        <h3>Explore Hasura permissions with confidence!</h3>

        <h4>
          Metadelta allows you to view Hasura's sophisticated permission
          rules, and in particular <i>changes</i> to those permissions. The
          "diff" mode is useful during code review, to gain a full
          understanding of changes before approving, and the "single" mode is
          useful for exploration of an existing permission setup.
        </h4>
      </div>
      <div class="product-image">
        <img src="/images/metadelta/ex1.webp" />
        <img src="/images/metadelta/ex2.webp" />
      </div>
    </div>

    <div class="content">
      <h3>About</h3>
      <p>
      <a href="https://hasura.io/">Hasura</a> is a lovely and widely-used GraphQL
      server. An important part of
      most Hasura setups is the configuration of <em>permissions</em> for
      accessing and manipulating the underlying records in the database.
      </p>

      <p> <em>Metadelta</em> allows you view these permissions in a
      convenient way; either in a "single" way (just point it at a
      Hasura metdata folder), or a "diff" way (point it at an "old" and
      a "new" one!)
      </p>

      <p> The advantage of using Metadelta for exploring the permissions
      (especially the permission <em>changes</em>) is that, when your
      permission architecture gets even moderately complicated, it can be
      hard to get a complete and comprehensive view of all the changes: the
      roles impacted, the tables impacted, etc. This is where Metadelta
      comes in!
      </p>

      <h3> Features </h3>
      <ul>
        <li> ðŸ‘€ View the permission information for a particular metadata
          instance,
        </li>
        <li> ðŸš€ Automate the creation (via a CI step) of a diff-based view, that
          allows you to see the exact permission changes, on, say, a Pull
          Request,
        </li>
        <li> ðŸ”Ž Various filtering/grouping options to gain a complete
          understanding of permission changes.
        </li>
      </ul>

      <h3> Try it out! </h3>

      <div class="guides">
        <div class="guide one">
          <div class="img"> <span> ðŸ‘€ </span> </div>
          <h4> Explore the demos </h4>
          <div class="info">
            <p>
            We have pre-computed a couple of diffs from the <code><a
                href="https://github.com/InvariantClub/demo-database/">
                demo-database</a></code> repository that you can explore in
            the <a href="https://metadelta.invariant.club">Metadelta UI</a>.
            </p>
          </div>
          <div class="link">
            <a href="https://metadelta.invariant.club">Take a look</a>
          </div>
        </div>


        <div class="guide two">
          <div class="img"> <span>ðŸš€ </span> </div>
          <h4> GitHub Action integration </h4>
          <div class="info">
            <p> Whenever a PR changes permissions, this workflow will
            compute a diff and create a link to view that in the UI so
            reviewers can understand the full impact of changes.
            </p>
          </div>
          <div class="link">
            <a href="https://github.com/InvariantClub/demo-database/?tab=readme-ov-file#github-action-integration">Learn more</a>
          </div>
        </div>

      </div>

      <h3> Run Metadelta locally </h3>

      <p>If you would like to test out the Metadelta CLI locally, you can
      use <a href="https://github.com/InvariantClub/metadelta/pkgs/container/metadelta">our docker image</a>.

      <p>As an example this invokes the <code>diff</code>
      command on two folders in the present working directory called
      "<code>old</code>"
      and "<code>new</code>":
      </p>

      <pre>
docker run -i \
  -v $$PWD:/work \
  ghcr.io/invariantclub/metadelta \
  diff \
  -o /work/old/hasura/metadata \
  -n /work/new/hasura/metadata \
  &gt;diff.json</pre>

      <p>Then you can take the <code>diff.json</code> file and paste it into
      the <a href="https://metadelta.invariant.club/new">Metadelta UI</a>.
      For a more convenient workflow, we would recommend an integration
      similar to the
      <a href="https://github.com/InvariantClub/demo-database/?tab=readme-ov-file#github-action-integration">GitHub
        Action example</a>.
      </p>

      If you would like to just run it on a pre-made example, you can clone
      our <code><a href="https://github.com/InvariantClub/demo-database/">
          demo-database</a></code> repo and use the scripts:

      <pre>git clone https://github.com/InvariantClub/demo-database
cd demo-database/
./scripts/compute-demo-diff.sh 98b1123 3b627cd</pre>

      <p>And again paste the resulting JSON output to the UI.</p>

      <h3> Supporting this project </h3>

      <p>Metadelta will always be free for open-source projects, and is,
      while we're in beta, free for any project at all.</p>

      <p>If you have a project that you think this would be
      useful for, or you have any other feedback, please reach out; either
      via email: <a href="mailto:noonsilk+metadelta@gmail.com">noonsilk+metadelta@gmail.com</a>
      or on our issue tracker: <a href="https://github.com/InvariantClub/metadelta/issues">metadelta/issues</a>.
      </p>


      <h3> FAQs </h3>

      <ul>
        <li>
          <b>Q:</b> Will this be compatible with Hasura V3?
          <br />
          <b>A:</b> Yes. It looks as if V3 will have some
          <a href="https://hasura.io/docs/3.0/supergraph-modeling/permissions/">additional
            permission abilities</a> that we will work to support as it comes out
          of alpha; but our intention is to be fully compatible.
        </li>
      </ul>

      <p> <small> Note: Metadelta is not an official Hasura product; it is
        provided and supported entirely by Invariant Club, an independent
        third party. </small> </p>
    </div>
  </div>
</div>

